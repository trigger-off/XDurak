ðŸ“¦
19702 /src/main.js
7738 /src/AndroidBasic.js
900 /src/GDX.js
42 /src/XDurak.js
âœ„
import e from"./XDurak.js";const t=new Date;import{CheckBox as a,DialogBuilder as s,EditText as n,LinearLayout as r,TextView as c}from"./AndroidBasic.js";import{Preferences as i}from"./GDX.js";function o(e){return(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()}function u(e){return(e.getDate()<10?"0":"")+e.getDate()+"/"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/"+e.getFullYear()}console.warn("work, runtime: ",u(t),o(t));class l{preferences;script_update={old:0,new:Number(e.VERSION)};constructor(t){this.preferences=new i(t.getPreferences("XDurak")),this.script_update.old=Number(this.preferences.getString("version","0")),this.preferences.putString("version",e.VERSION),this.preferences.flush()}accurate_search=0;connect_to_first_game=!1;get auto_beat(){return this.preferences.getBoolean("auto_beat",!1)}set auto_beat(e){this.preferences.putBoolean("auto_beat",e),this.preferences.flush()}get auto_take(){return this.preferences.getBoolean("auto_take",!1)}set auto_take(e){this.preferences.putBoolean("auto_take",e),this.preferences.flush()}get auto_done(){return this.preferences.getBoolean("auto_done",!1)}set auto_done(e){this.preferences.putBoolean("auto_done",e),this.preferences.flush()}get watch_cards(){return this.preferences.getBoolean("watch_cards",!1)}set watch_cards(e){this.preferences.putBoolean("watch_cards",e),this.preferences.flush()}get auto_ready(){return this.preferences.getBoolean("auto_ready",!1)}set auto_ready(e){this.preferences.putBoolean("auto_ready",e),this.preferences.flush()}get highlight(){return this.preferences.getBoolean("highlight",!0)}set highlight(e){this.preferences.putBoolean("highlight",e),this.preferences.flush()}get toast_cheater(){return this.preferences.getBoolean("toast_cheater",!0)}set toast_cheater(e){this.preferences.putBoolean("toast_cheater",e),this.preferences.flush()}get grey_card_cheater(){return this.preferences.getBoolean("grey_card_cheater",!0)}set grey_card_cheater(e){this.preferences.putBoolean("grey_card_cheater",e),this.preferences.flush()}get autoclick_cheater(){return this.preferences.getBoolean("autoclick_cheater",!1)}set autoclick_cheater(e){this.preferences.putBoolean("autoclick_cheater",e),this.preferences.flush()}get match_history(){return JSON.parse(this.preferences.getString("match_history","[]"))}set match_history(e){this.preferences.putString("match_history",JSON.stringify(e)),this.preferences.flush()}get smile(){return this.preferences.getString("smile","")}set smile(e){this.preferences.putString("smile",e),this.preferences.flush()}get shirt(){return this.preferences.getString("shirt","")}set shirt(e){this.preferences.putString("shirt",e),this.preferences.flush()}get frame(){return this.preferences.getString("frame","")}set frame(e){this.preferences.putString("frame",e),this.preferences.flush()}}const h={"â™¥ï¸":"H","â™¦ï¸":"D","â™£ï¸":"C","â™ ï¸":"S"};function m(e,t){const a=["â™ ","â™£","â™¦","â™¥"],s=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],n=e=>e===t?1/0:a.indexOf(e),r=e=>s.indexOf(e);return e.sort(((e,t)=>{const a=e[0],s=t[0],c=e.slice(1),i=t.slice(1);return n(a)!==n(s)?n(a)-n(s):r(c)-r(i)}))}function d(e){const t={"â™ ":[],"â™£":[],"â™¦":[],"â™¥":[]};e.forEach((e=>{const a=e[0],s=e.slice(1);t[a].push(s)}));let a="";return Object.keys(t).forEach((e=>{t[e].length>0&&(a+=`${e}: ${t[e].join(" ")}\n`)})),a.trim()}const _=e=>{const t=new RegExp(Object.keys(h).join("|"),"g"),a=e.replace(t,(e=>h[e]));return g(a)},g=e=>e.slice(0,1),v=e=>e.slice(1),f=e=>{switch(e){case"A":return 14;case"K":return 13;case"Q":return 12;case"J":return 11;default:return parseInt(e,10)}},p=(e,t,a)=>{const s=v(e),n=_(e),r=v(t),c=_(t),i=f(s),o=f(r);return n===c?i>o:c!==_(a)&&n===_(a)};function b(e,t){const a=t.map((e=>e.slice(-1)));return e.filter((e=>a.includes(e.slice(-1))))}class w{discard_cards=[];enemy_known_cards=[[],[],[],[],[],[]];id;enemy_hand_cards=[];final_enemy_hand=!1;cards_on_table=[];cards_on_table_bito=[];cards_on_table_active=[];constructor(e){this.id=e}}let k;Java.perform((()=>{let e=new w(0);try{Java.choose("com.rstgames.durak.StartActivity",{onComplete(){},onMatch(e){if(null!=e)return void 0!==e.getPreferences?(k=new l(e),"stop"):void 0}})}catch{}const t=Java.use("com.badlogic.gdx.Gdx"),i=Java.use("com.rstgames.durak.StartActivity"),h=Java.use("com.rstgames.durak.StartActivity$b"),J=(Java.use("com.rstgames.net.f"),Java.use("com.rstgames.b")),$=(Java.use("com.badlogic.gdx.Screen"),Java.use("com.badlogic.gdx.Game")),S=(Java.use("com.badlogic.gdx.utils.ScreenUtils"),Java.use("com.badlogic.gdx.scenes.scene2d.Group"),Java.use("com.rstgames.uiscreens.q"),Java.use("com.badlogic.gdx.Graphics"),Java.use("com.rstgames.durak.screens.CreateGameScreen$k"),Java.use("com.badlogic.gdx.utils.viewport.ScreenViewport"),Java.use("com.badlogic.gdx.scenes.scene2d.Stage"),Java.use("com.rstgames.utils.a0"),Java.use("com.rstgames.AppController"),Java.use("com.badlogic.gdx.scenes.scene2d.ui.Label"),Java.use("com.badlogic.gdx.scenes.scene2d.ui.Label$LabelStyle"),Java.use("java.lang.String")),y=(Java.use("com.badlogic.gdx.graphics.Color"),Java.use("com.badlogic.gdx.graphics.g2d.BitmapFont"),Java.use("com.rstgames.durak.screens.c"),Java.use("android.graphics.Color"),Java.use("com.badlogic.gdx.scenes.scene2d.InputEvent")),T=Java.use("com.rstgames.durak.screens.c$e$a"),x=Java.use("com.rstgames.durak.screens.c"),E=Java.use("com.badlogic.gdx.utils.Logger"),C=Java.use("com.rstgames.durak.controllers.a"),B=Java.use("com.rstgames.utils.b0");Java.use("com.rstgames.utils.RSTAssetPosition");Java.use("com.rstgames.utils.RSTAssetPosition$ASSET_STATE");Java.use("com.rstgames.uiscreens.m"),Java.use("com.rstgames.utils.a0");const N=Java.use("com.badlogic.gdx.scenes.scene2d.utils.ClickListener"),L=(Java.use("com.rstgames.durak.screens.d"),Java.use("com.badlogic.gdx.graphics.Texture")),O=(Java.use("com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable"),Java.use("com.badlogic.gdx.scenes.scene2d.ui.Image")),A=Java.use("com.rstgames.durak.screens.b"),P=(Java.use("com.rstgames.uiscreens.l"),Java.use("com.rstgames.durak.screens.a")),j=(Java.use("com.rstgames.durak.screens.b$x0"),Java.use("com.rstgames.durak.screens.c$e")),M=Java.use("com.rstgames.durak.screens.b$i"),G=Java.use("org.json.b"),V=Java.use("org.json.a"),H=Java.use("com.rstgames.durak.utils.a$c"),R=Java.use("com.rstgames.net.JsonIpServerConnector"),D=Java.use("com.rstgames.durak.screens.b$j"),I=Java.use("com.rstgames.durak.screens.b$o0$l"),W=Java.use("com.rstgames.durak.screens.b$o0$a"),z=(Java.use("com.rstgames.durak.screens.b$p0$a"),Java.use("com.rstgames.durak.screens.b$s0$a"),Java.use("com.rstgames.durak.screens.b$d0"),Java.use("com.rstgames.durak.screens.b$f0"),Java.use("com.rstgames.durak.controllers.GameController$GAME_STATE"),Java.use("com.rstgames.durak.utils.d")),K=Java.use("com.rstgames.durak.screens.b$o0"),Q=Java.use("com.rstgames.durak.screens.b$m0"),X=Java.use("com.rstgames.durak.screens.b$j0"),F=Java.use("com.rstgames.durak.screens.b$g1"),Y=Java.use("android.widget.Toast"),q=Java.use("com.rstgames.durak.utils.Card$CARD_VIEW_TYPE"),U=Java.use("com.rstgames.uiscreens.d");function Z(){this.show();const e=t.app.value,o=t.files.value,u=t.graphics.value,l=Java.cast(e.getApplicationListener(),J).a0.value,h=L.$new(o.internal("data/general_textures/achieves_and_assets/cheat_success/icon.png"),!0),m=O.$new(h);m.setPosition(10,u.getHeight()-m.getHeight()-10),m.setSize(m.getWidth()/1.5,m.getHeight()/1.5),m.addListener(Java.registerClass({name:"com.triggeroff.frida.FiltersOnClick",superClass:N,methods:{clicked:{returnType:"void",argumentTypes:["com.badlogic.gdx.scenes.scene2d.InputEvent","float","float"],implementation(e,o,u){Java.scheduleOnMainThread((()=>{const e=Java.cast(t.app.value,i),o=Java.cast(e.getApplicationListener(),J),u=o.getScreen().$className;if("com.rstgames.durak.screens.a"==u){const t=new s(e),a=new n(e,"","ÐÑƒÐ¶Ð½Ð°Ñ ÑÑ‚Ð°Ð²ÐºÐ°");t.setTitle("Ð¢Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº"),t.setView(a),t.setPositiveButton("ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ",((e,t)=>{k.accurate_search=Number(a.getText())})),t.setNegativeButton("Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ",((e,t)=>{k.accurate_search=0})),k.accurate_search>0&&a.setText(k.accurate_search.toString()),t.show()}else if("com.rstgames.durak.screens.c"==u){const t=new s(e);t.setTitle("ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð½Ð¾Ð²Ð¾Ð¹ Ð¸Ð³Ñ€Ðµ?"),k.connect_to_first_game?t.setMessage("(Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾)"):t.setMessage("(Ð’Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾)"),t.setPositiveButton("Ð”Ð°",((e,t)=>{k.connect_to_first_game=!0})),t.setNegativeButton("ÐÐµÑ‚",((e,t)=>{k.connect_to_first_game=!1})),t.show()}else if("com.rstgames.durak.screens.b"==u){const t=o._N.value,n=t._w.value,i=(t._x.value,n.j?.value??!1),u=new s(e),l=new r(e),h=new a(e,"ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÐºÐ°Ñ€Ñ‚ (Ð—Ð°Ð¼ÐµÐ½ÑÐµÑ‚ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ)",k.watch_cards),m=new a(e,"ÐŸÐ¾Ð´ÑÐ²ÐµÑ‡Ð¸Ð²Ð°Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñ‹",k.highlight),d=new c(e,"ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ: "),_=new a(e,"ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ð°Ñ‚ÑŒ Ð¸Ð³Ñ€Ñƒ",k.auto_ready),g=new a(e,"ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°Ñ‚ÑŒ ÐŸÐ°Ñ/Ð“Ð¾Ñ‚Ð¾Ð², ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÐºÐ°Ñ€Ñ‚",k.auto_done),v=new a(e,"ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð´Ð±Ð¸Ñ€Ð°Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñ‹, ÐµÑÐ»Ð¸ Ð½ÐµÑ‚ ÐºÐ°Ñ€Ñ‚",k.auto_take),f=new a(e,"ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ñ‚Ð±Ð¸Ð²Ð°Ñ‚ÑŒÑÑ, ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñ‹",k.auto_beat);if(h.setCheckedChangeListener(((e,t)=>{k.watch_cards=t})),m.setCheckedChangeListener(((e,t)=>{k.highlight=t})),_.setCheckedChangeListener(((e,t)=>{k.auto_ready=t})),g.setCheckedChangeListener(((e,t)=>{k.auto_done=t})),v.setCheckedChangeListener(((e,t)=>{k.auto_take=t})),f.setCheckedChangeListener(((e,t)=>{k.auto_beat=t})),l.setOrientation("VERTICAL"),l.addViews([h,m,d,_,g,v]),i){const t=new c(e,"Ð¨ÑƒÐ»ÐµÑ€: "),s=new a(e,"ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾ ÑˆÑƒÐ»ÐµÑ€Ðµ",k.toast_cheater);s.setCheckedChangeListener(((e,t)=>{k.toast_cheater=t}));const n=new a(e,"ÐŸÐ¾Ð¼ÐµÑ‡Ð°Ñ‚ÑŒ ÑÐµÑ€Ñ‹Ð¼ Ð½ÐµÑ‡ÐµÑÑ‚Ð½ÑƒÑŽ ÐºÐ°Ñ€Ñ‚Ñƒ",k.grey_card_cheater);n.setCheckedChangeListener(((e,t)=>{k.grey_card_cheater=t}));const r=new a(e,"ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð½Ð°Ð¶Ð¸Ð¼Ð°Ñ‚ÑŒ Ð½Ð° Ð½ÐµÑ‡ÐµÑÑ‚Ð½ÑƒÑŽ ÐºÐ°Ñ€Ñ‚Ñƒ",k.autoclick_cheater);r.setCheckedChangeListener(((e,t)=>{k.autoclick_cheater=t})),l.addViews([t,s,n,r])}u.setTitle("ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¼Ð°Ñ‚Ñ‡Ð°"),u.setView(l),u.setPositiveButton("OK",((e,t)=>{})),u.show()}else if("com.rstgames.uiscreens.d"==u){const t=new s(e),a=new r(e);a.setOrientation("VERTICAL");const i=new c(e,"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ id ÑÐºÐ¸Ð½Ð° Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ð¾Ð»Ðµ Ð¸Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð·Ð°Ð¼ÐµÐ½ÑÑ‚ÑŒ.\nÐ’ÑÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð²Ð¸Ð´Ð½Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð²Ð°Ð¼."),u=new n(e,k.smile,"smile_classic"),l=new n(e,k.shirt,"shirt_classic"),h=new n(e,k.frame,"frame_classic");a.addViews([i,u,l,h]),t.setTitle("Ð¡ÐºÐ¸Ð½Ñ‡ÐµÐ½Ð´Ð¶ÐµÑ€"),t.setView(a),t.setPositiveButton("OK",(()=>{const e=o._d.value;k.smile=u.getText(),k.shirt=l.getText(),k.frame=h.getText();const t=G.$new();t.N("v",k.frame),t.N("k","frame"),e.h("uu",t)})),t.show()}}))}}}}).$new()),l.addActor(m)}function ee(){const t=this.c.value._a.value,a=(this.a.value,this.b.value);e.enemy_known_cards[a].push(t._W.value[this.a.value]._c.value),this.run()}function te(a,s){this.a(a,s);let n=s.H("c");const r=this._a.value,c=r._w.value.j.value,i=s.H("b"),o=r._x.value._i.value,u=t.app.value,l=r._W.value;let h=!1;c&&(e.cards_on_table.length>0?e.cards_on_table.forEach((e=>{v(e)==v(n)&&(h=!0)})):h=!0),""!=i&&(c&&(h=p(i,n,o)),n=i),!h&&c&&Java.scheduleOnMainThread((()=>{k.toast_cheater&&Y.makeText(u,S.$new("ÑˆÑƒÐ»ÐµÑ€"),Y.LENGTH_SHORT.value).show();const e=l[r.u(n)];k.grey_card_cheater&&e.d(q.c.value)}));const m=s.B("id");e.enemy_known_cards[m]=e.enemy_known_cards[m].filter((e=>e!==n))}function ae(t){const a=t._W.value;e.cards_on_table=[];const s=[];null!=a&&a.forEach((t=>{2==t.g.value?e.cards_on_table.push(t._c.value):1==t.g.value&&s.push(t._c.value)})),e.cards_on_table_active=e.cards_on_table.filter((t=>!e.cards_on_table_bito.includes(t)));const n=t._a.value,r=t._w.value,c=t._x.value._i.value,i=r.z.value,o=r.p.value,u=G.$new(),l=V.$new(),h=r.k.value;if(k.highlight)if(9==o[i]){let t=[];(function(e,t,a){const s=[];for(const n of t)for(const t of e)p(t,n,a)&&(s.includes(t)||s.push(t));return s})(s.filter((e=>null!=e)),e.cards_on_table_active,c).forEach((e=>{l.x(e)})),h&&0==e.cards_on_table_bito.length&&(t=b(s.filter((e=>null!=e)),e.cards_on_table),t.forEach((e=>{l.x(e)}))),u.N("c",l)}else if(0==o[i]||1==o[i]&&e.cards_on_table.length>0){b(s.filter((e=>null!=e)),e.cards_on_table).forEach((e=>{l.x(e)})),u.N("c",l)}n.E().h("hl",u)}$.setScreen.implementation=function(e){void 0!==k&&(k.connect_to_first_game=!1),this.setScreen(e)},C.b.implementation=function(){let e=this.b();return k.accurate_search>0&&(e=k.accurate_search),e},C.e.implementation=function(){let e=this.e();return k.accurate_search>0&&(e=k.accurate_search),e},i.onCreate.implementation=function(e){k=new l(this),this.onCreate(e);const t=Java.retain(this);k.script_update.old<k.script_update.new&&Java.scheduleOnMainThread((()=>{Y.makeText(t,S.$new(`XDurak Script: ${k.script_update.old} => ${k.script_update.new}`),Y.LENGTH_SHORT.value).show()}))},i.p.implementation=function(e,t,a,s,n){"com.rstgames.durak.StartActivity$b"==e.$className&&(t="Ð¡Ð¿Ð¾ÑÐ¾Ð± Ð²Ñ…Ð¾Ð´Ð°:",s="Ð¢Ð¾ÐºÐµÐ½",a="Ð“ÑƒÐ³Ð»"),this.p(e,t,a,s,n)},h.b.implementation=function(){const e=this._a.value,t=new s(e),a=new n(e),r=e._a.value;a.setHint("Ð¢Ð¾ÐºÐµÐ½"),t.setTitle("Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½"),t.setView(a),t.setPositiveButton("ÐžÐš",((t,s)=>{const n=a.getText();if(e.A(n),null!=r){const e=r._d?.value;null==e&&null==e||(e._w.value=n,e.u(!1))}})),t.show()},E.info.overload("java.lang.String").implementation=function(e){this.info(e)},Java.use("com.rstgames.utils.b0$a").clicked.implementation=function(e,a,n){this.clicked(e,a,n),Java.scheduleOnMainThread((()=>{const e=t.app.value,a=new s(e);a.setTitle("Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¼Ð°Ñ‚Ñ‡ÐµÐ¹");let n="";k.match_history.sort(((e,t)=>t.date-e.date)).forEach((e=>{let t=new Date(e.date);n+=`${u(t)} ${o(t)} ${e.value>0?"+"+e.value.toString():e.value}\n`})),a.setMessage(n),a.setPositiveButton("ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ",((e,t)=>{k.match_history=[]})),a.setNegativeButton("Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",((e,t)=>{})),a.show()}))},P.show.implementation=Z,x.show.implementation=Z,A.show.implementation=Z,U.show.implementation=Z,j.a.implementation=function(e,t){if(this.a(e,t),k.connect_to_first_game){T.$new(this,t).clicked(y.$new(),0,0),k.connect_to_first_game=!1}},M.a.implementation=function(t,a){e=new w(a.g("id")),this.a(t,a)},H.clicked.implementation=function(t,a,s){this.clicked(t,a,s);const n=this.a.value._a.value.E(),r=G.$new(),c=V.$new();e.discard_cards.forEach((e=>{c.x(e)})),r.N("c",c),n.h("discard",r)},R.o.implementation=function(e){"show_discard"!==e&&this.o(e)},D.a.implementation=function(e,t){t.L("dis",0),t.L("hl",0),this.a(e,t)},I.run.implementation=ee,W.run.implementation=ee,Java.use("com.rstgames.durak.screens.b$s0").a.implementation=te,Java.use("com.rstgames.durak.screens.b$p0").a.implementation=te,K.a.implementation=function(t,a){this.a(t,a),e.cards_on_table_bito=[]},z.g.implementation=function(t,a,s){""!=a&&"sw"!=t&&e.cards_on_table_bito.push(t,a);return this.g(t,a,s)},Q.a.implementation=function(t,a){this.a(t,a);const s=this._a.value;ae(s);const n=s._W.value;e.cards_on_table=[];const r=[];null!=n&&n.forEach((t=>{2==t.g.value?e.cards_on_table.push(t._c.value):1==t.g.value&&r.push(t._c.value)})),e.cards_on_table_active=e.cards_on_table.filter((t=>!e.cards_on_table_bito.includes(t)));const c=s._a.value,i=s._w.value,o=(i.G.value,s._x.value._i.value),u=i.z.value,l=i.p.value,h=i.k.value;let m=[];if(9==l[u]){const t=function(e,t,a){const s=[];e.sort(((e,t)=>{const s=_(e)===a?1:0,n=_(t)===a?1:0,r=f(v(e)),c=f(v(t));return s!==n?n-s:r-c}));for(const n of t){let t=!1;for(let r=0;r<e.length;r++){const c=e[r];if(p(c,n,a)){s.push({orig:n,beat:c}),e.splice(r,1),t=!0;break}}if(!t)return[]}return s}(r,e.cards_on_table_active,o);console.log(JSON.stringify(t)),h&&0==e.cards_on_table_bito.length&&(m=b(r.filter((e=>null!=e)),e.cards_on_table)),0==t.length&&k.auto_take&&0==m.length&&c.E().o("take")}else if(0==l[u]||1==l[u]&&e.cards_on_table.length>0){if(0==b(r.filter((e=>null!=e)),e.cards_on_table).length&&k.auto_done)switch(l[u]){case 0:c.E().o("pass");break;case 1:c.E().o("done")}}},X.a.implementation=function(e){console.log(`j0.a is called: i=${e}`),this.a(e)},X.b.implementation=function(e){this.b(e),ae(this.i.value)},A.Q.implementation=function(){const a=k.shirt;""!=a&&(this.C0.value=a),this.Q();const n=this._w?.value,r=this._x?.value;this._a?.value;if(null==r||null==n)return;r.o?.value&&(e.discard_cards=r.o?.value);const c=this._W.value,i=r._g.value.length,o=r._i.value,u=r?._j.value;e.cards_on_table=[];const l=[];if(null!=c&&c.forEach((t=>{2==t.g.value?e.cards_on_table.push(t._c.value):1==t.g.value&&l.push(t._c.value)})),Number(u)==Number(0)&&""!=o&&Number(i)==Number(2)){const a=[];c.forEach((e=>{a.push(e._c.value)}));const n=[...e.discard_cards,...l,...e.cards_on_table,"sw"],r=a.filter((e=>!n.includes(e)));e.enemy_hand_cards=r,e.final_enemy_hand||(e.final_enemy_hand=!0,Java.scheduleOnMainThread((()=>{const a=t.app.value,n=new s(a);n.setTitle("ÐšÐ°Ñ€Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð½Ð¸ÐºÐ°: "),n.setMessage(d(m(e.enemy_hand_cards,g(o)))),n.show()})))}},F.a.implementation=function(e,t){this.a(e,t);const a=this._a.value._w.value;if(t.B("id")==a.z.value){const e=k.match_history;e.push({date:Date.now(),value:t.B("value")}),k.match_history=e}},Java.use("com.rstgames.durak.screens.b$k0").$init.implementation=function(e,t,a){this.$init(e,t,a);const s=Java.retain(this);k.autoclick_cheater&&setTimeout((()=>{Java.perform((()=>{s.clicked(y.$new(),0,0)}))}),100)};let se=Java.use("com.rstgames.durak.utils.RSTGamePlace$a"),ne=Java.use("com.rstgames.durak.utils.RSTGamePlace$PLACE_TYPE");se.clicked.implementation=function(a,n,r){const c=this.a.value,i=c._a.value._N.value,o=(i._w.value.z.value,c.H.value),u=t.app.value,l=i._x.value,h=i._W.value;e.cards_on_table=[];const _=[];null!=h&&h.forEach((t=>{2==t.g.value?e.cards_on_table.push(t._c.value):1==t.g.value&&_.push(t._c.value)}));const v=l._i.value,f=c.G.value;k.watch_cards&&f.toString()==ne.c.value.toString()?Java.scheduleOnMainThread((()=>{const t=new s(u);t.setTitle("ÐšÐ°Ñ€Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð½Ð¸ÐºÐ°");let a=[...e.discard_cards,..._,...e.cards_on_table,"sw"];e.enemy_known_cards.forEach((e=>{a=[...a,...e]}));const n=i._W.value,r=[];n.forEach((e=>{r.push(e._c.value)}));const c=r.filter((e=>!a.includes(e)));t.setMessage(e.final_enemy_hand?d(m(e.enemy_hand_cards,g(v))):"Ð˜Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ€Ñ‚Ñ‹:\n"+d(m(e.enemy_known_cards[o],g(v)))+"\nÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ðµ ÐºÐ°Ñ€Ñ‚Ñ‹:\n"+d(m(c,g(v)))),t.show()})):this.clicked(a,n,r)},Java.use("com.rstgames.durak.screens.b$y").a.implementation=function(e,t){this.a(e,t);const a=this._a.value._a.value;k.auto_ready&&a.E().o("ready")},A.V.implementation=function(){const e=this._a.value.E();""!=k.smile&&(e.P.value=k.smile),this.V()},Java.use("com.rstgames.durak.screens.b$r").a.implementation=function(e,t){const a=k.smile;t.B("p")==this._a.value._w.value.z.value&&""!=a&&t.N("a",a),this.a(e,t)},B.n.implementation=function(e){console.log(`b0.n is called: str=${e}`);const t=k.frame;""!=t&&(e=t),this.n(e)},Java.use("com.rstgames.durak.utils.RSTGamePlace").h.implementation=function(e,t,a,s,n,r,c,i,o,u){const l=k.frame,h=this._a.value._d.value.c0.value;n.valueOf()==h.valueOf()&&""!=l&&(a=l),this.h(e,t,a,s,n,r,c,i,o,u)},Java.use("com.rstgames.durak.screens.b$l").a.implementation=function(e,t){const a=k.shirt,s=t.E("shirt");""!=a&&s.N("id",a),s.L("lvl",1),t.N("shirt",s),this.a(e,t)}}));
âœ„
const e=Java.use("java.lang.String");Java.use("android.text.Html");const t=function(e=0){let t=e;return()=>t++}();export class Color{static Color=Java.use("android.graphics.Color");static parseColor(e){return this.Color.parseColor(e)}}export class View{element;static jClass=Java.use("android.view.View");constructor(e){this.element=this.createElement(e)}View$OnClickListener(e){return Java.registerClass({name:`com.tr1gger0ff.OnClickListener$${t()}`,implements:[Java.use("android.view.View$OnClickListener")],methods:{onClick:e}}).$new()}View$OnLongClickListener(e){return Java.registerClass({name:`com.tr1gger0ff.OnLongClickListener$${t()}`,implements:[Java.use("android.view.View$OnLongClickListener")],methods:{onLongClick:function(t){return e(t),!0}}}).$new()}View$OnTouchListener(e){return Java.registerClass({name:`com.tr1gger0ff.OnTouchListener$${t()}`,implements:[Java.use("android.view.View$OnTouchListener")],methods:{onTouch:(t,s)=>(e(t,s),!0)}}).$new()}setClickListener(e,t){t?this.element.setOnClickListener(this.View$OnClickListener(e)):this.element.addEventListener(this.View$OnClickListener(e))}setLongClickListener(e,t){t?this.element.setOnLongClickListener(this.View$OnLongClickListener(e)):this.element.addEventListener(this.View$OnLongClickListener(e))}setTouchListener(e,t){t?this.element.setOnTouchListener(this.View$OnTouchListener(e)):this.element.addEventListener(this.View$OnTouchListener(e))}setEnabled(e){this.element.setEnabled(e)}setVisibility(e){this.element.setVisibility(View.jClass[e].value)}setBackgroundColor(e){"string"==typeof e&&(e=Color.parseColor(e)),this.element.setBackgroundColor(e)}setLayoutParams(e){e instanceof LayoutParams?this.element.setLayoutParams(e.element):this.element.setLayoutParams(e)}getLayoutParams(){return new LayoutParams(Java.cast(this.element.getLayoutParams(),LayoutParams.jClass))}}export class TextView extends View{static jClass=Java.use("android.widget.TextView");createElement(e){return TextView.jClass.$new(e)}constructor(e,t){super(e),t&&this.setText(t)}getText(){return Java.cast(this.element.getText(),Java.use("java.lang.CharSequence")).toString()}getTextSize(){return this.element.getTextSize()}setText(t){this.element.setText(e.$new(t))}setHint(t){this.element.setHint(e.$new(t))}setTextSize(e){this.element.setTextSize(e)}setTextColor(e){"string"==typeof e&&(e=Color.parseColor(e)),this.element.setTextColor(e)}}export class EditText extends TextView{BufferType=Java.use("android.widget.TextView$BufferType");static jClass=Java.use("android.widget.EditText");createElement(e){return EditText.jClass.$new(e)}constructor(e,t,s){super(e),s&&this.setHint(s),t&&this.setText(t,"NORMAL")}setText(t,s="EDITABLE"){this.element.setText(e.$new(t),this.BufferType[s].value)}}export class LinearLayout extends View{LinearLayout=Java.use("android.widget.LinearLayout");static jClass=Java.use("android.widget.LinearLayout");createElement(e){return LinearLayout.jClass.$new(e)}setOrientation(e){this.element.setOrientation(this.LinearLayout[e].value)}addView(e){e instanceof View?this.element.addView(e.element):this.element.addView(e)}addViews(e){e.forEach((e=>{this.addView(e)}))}}export class CheckBox extends TextView{static jClass=Java.use("android.widget.CheckBox");CompoundButton$OnCheckedChangeListener(e){return Java.registerClass({name:`com.tr1gger0ff_OnCheckedChangeListener$${t()}`,implements:[Java.use("android.widget.CompoundButton$OnCheckedChangeListener")],methods:{onCheckedChanged:e}}).$new()}createElement(e){return CheckBox.jClass.$new(e)}constructor(e,t,s){super(e,t),s&&this.setChecked(s)}setCheckedChangeListener(e){this.element.setOnCheckedChangeListener(this.CompoundButton$OnCheckedChangeListener(e))}isChecked(){return this.element.isChecked()}setChecked(e){this.element.setChecked(e)}}export class Dialog{element;static jClass=Java.use("android.app.Dialog");constructor(e){this.element=e}dismiss(){this.element.dismiss()}cancel(){this.element.cancel()}hide(){this.element.hide()}setCancelable(e){this.element.setCancelable(e)}setTitle(t){this.element.setTitle(e.$new(t))}isShowing(){return this.element.isShowing()}show(){this.element.show()}}export class AlertDialog extends Dialog{DialogInterface$OnClickListener(e){return Java.registerClass({name:`com.tr1gger0ff_OnClickListener$${t()}`,implements:[Java.use("android.content.DialogInterface$OnClickListener")],methods:{onClick:e}}).$new()}setButton(t,s,n){this.element.setButton(Dialog.jClass[t].value,e.$new(s),this.DialogInterface$OnClickListener(n))}setMessage(t){this.element.setMessage(e.$new(t))}setView(e){e instanceof View?this.element.setView(e.element):this.element.setView(e)}}export class DialogBuilder{static jClass=Java.use("android.app.AlertDialog$Builder");DialogInterface$OnClickListener(e){return Java.registerClass({name:`com.tr1gger0ff_OnClickListener$${t()}`,implements:[Java.use("android.content.DialogInterface$OnClickListener")],methods:{onClick:e}}).$new()}DialogInterface$OnCancelListener(e){return Java.registerClass({name:`com.tr1gger0ff_OnCancelListener$${t()}`,implements:[Java.use("android.content.DialogInterface$OnCancelListener")],methods:{onCancel:e}}).$new()}DialogInterface$OnDismissListener(e){return Java.registerClass({name:`com.tr1gger0ff_OnDismissListener$${t()}`,implements:[Java.use("android.content.DialogInterface$OnDismissListener")],methods:{onDismiss:e}}).$new()}dialogInstance;constructor(e){this.dialogInstance=DialogBuilder.jClass.$new(e)}setTitle(t){this.dialogInstance.setTitle(e.$new(t))}setMessage(t){this.dialogInstance.setMessage(e.$new(t))}setCancelable(e){this.dialogInstance.setCancelable(e)}setPositiveButton(t,s){this.dialogInstance.setPositiveButton(e.$new(t),this.DialogInterface$OnClickListener(s))}setNegativeButton(t,s){this.dialogInstance.setNegativeButton(e.$new(t),this.DialogInterface$OnClickListener(s))}setNeutralButton(t,s){this.dialogInstance.setNeutralButton(e.$new(t),this.DialogInterface$OnClickListener(s))}setCancelListener(e){this.dialogInstance.setOnCancelListener(this.DialogInterface$OnCancelListener(e))}setDismissListener(e){this.dialogInstance.setOnDismissListener(this.DialogInterface$OnDismissListener(e))}setView(e){e instanceof View?this.dialogInstance.setView(e.element):this.dialogInstance.setView(e)}show(){let e=this.dialogInstance.show();return e=Java.cast(e,AlertDialog.jClass),new AlertDialog(e)}create(){let e=this.dialogInstance.create();return e=Java.cast(e,AlertDialog.jClass),new AlertDialog(e)}}export class SharedPreferencesEditor{static jClass=Java.use("android.content.SharedPreferences$Editor");element;constructor(e){this.element=e}apply(){this.element.apply()}clear(){this.element.clear()}commit(){return this.element.commit()}putBoolean(e,t){this.element.putBoolean(e,t)}putFloat(e,t){this.element.putFloat(e,t)}putInt(e,t){this.element.putInt(e,0|t)}putLong(e,t){this.element.putLong(e,t)}putString(e,t){this.element.putString(e,t)}remove(e){this.element.remove(e)}}export class SharedPreferences{static jClass=Java.use("android.content.SharedPreferences");element;constructor(e){this.element=e}contains(e){return this.element.contains(e)}edit(){return new SharedPreferencesEditor(this.element.edit())}getBoolean(e,t){return this.element.getBoolean(e,t)}getFloat(e,t){return this.element.getFloat(e,t)}getInt(e,t){return this.element.getInt(e,0|t)}getLong(e,t){return this.element.getLong(e,t)}getString(e,t){return this.element.getString(e,t)}}export class LayoutParams{static jClass=Java.use("android.view.ViewGroup$LayoutParams");element;constructor(e){this.element=e||LayoutParams.jClass.$new()}set width(e){this.element.width.value="string"!=typeof e?e:LayoutParams.jClass[e].value}set height(e){this.element.height.value="string"!=typeof e?e:LayoutParams.jClass[e].value}}
âœ„
export class Preferences{instance;constructor(t){this.instance=t}clear(){this.instance.clear()}contains(t){return this.instance.contains(t)}flush(){this.instance.flush()}getBoolean(t,n){return void 0!==n?this.instance.getBoolean(t,n):this.instance.getBoolean(t)}getFloat(t,n){return void 0!==n?this.instance.getFloat(t,n):this.instance.getFloat(t)}getInteger(t,n){return void 0!==n?this.instance.getInteger(t,n):this.instance.getInteger(t)}getLong(t,n){return void 0!==n?this.instance.getLong(t,n):this.instance.getLong(t)}getString(t,n){return void 0!==n?this.instance.getString(t,n):this.instance.getString(t)}putBoolean(t,n){return this.instance.putBoolean(t,n)}putFloat(t,n){return this.instance.putFloat(t,n)}putInteger(t,n){return this.instance.putInteger(t,n)}putLong(t,n){return this.instance.putLong(t,n)}putString(t,n){return this.instance.putString(t,n)}remove(t){this.instance.remove(t)}}
âœ„
export default class t{static VERSION="2"}